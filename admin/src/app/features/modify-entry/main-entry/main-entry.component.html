<app-pronunciation-characters *ngIf="environmentService.isLadin()"></app-pronunciation-characters>
<form nz-form [formGroup]="validateForm">
  <div nz-row>
    <div nz-col nzSpan="12">
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="categories">{{ 'edit.lemma.category' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="categories" id="categories" class="info-input" [nzAutocomplete]="categoryAuto" (input)="categoryChanged()"/>
          <nz-autocomplete [nzDataSource]="categoryAutocomplete" nzBackfill #categoryAuto></nz-autocomplete>
          <i nz-icon nzType="info-circle" class="info-button" nz-popover [nzPopoverContent]="'edit.lemma.category_info' | translate" nzPopoverPlacement="right"></i>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzSpan="12">
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="rmEtymologie">{{ 'edit.lemma.etymology' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmEtymologie" id="rmEtymologie"/>
        </nz-form-control>
      </nz-form-item>

    </div>
  </div>

  <h2>{{ 'edit.lemma.german' | translate }}</h2>
  <div nz-row>
    <div nz-col nzSpan="12">

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="deStichwort">{{ 'edit.lemma.de' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="deStichwort" id="deStichwort" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="deGenus">{{ 'edit.lemma.de_gender' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="deGenus" id="deGenus" [nzAutocomplete]="dGenderAutocomplete" (ngModelChange)="dGenderAutocompleteChanged($event)"/>
          <nz-autocomplete [nzDataSource]="dGenderAutocompleteValues" nzBackfill #dGenderAutocomplete></nz-autocomplete>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="deTags">{{ 'edit.lemma.de_tags' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="deTags" id="deTags" />
        </nz-form-control>
      </nz-form-item>

    </div>
    <div nz-col nzSpan="12">
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="deGrammatik">{{ 'edit.lemma.de_grammar' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="deGrammatik" id="deGrammatik" [nzAutocomplete]="dGrammarAutocomplete" (ngModelChange)="dGrammarAutocompleteChanged($event)"/>
          <nz-autocomplete [nzDataSource]="dGrammarAutocompleteValues" nzBackfill #dGrammarAutocomplete></nz-autocomplete>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="deSubsemantik">{{ 'edit.lemma.de_semantics' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="deSubsemantik" id="deSubsemantik" [nzAutocomplete]="dSemanticsAuto" (input)="dSemanticsChanged()"/>
          <nz-autocomplete [nzDataSource]="dSemanticsAutocomplete" nzBackfill #dSemanticsAuto></nz-autocomplete>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="deRedirect">{{ 'edit.lemma.de_link' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="deRedirect" id="deRedirect" />
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <nz-divider></nz-divider>

  <h2>{{ 'edit.lemma.romansh' | translate }}</h2>
  <div nz-row>
    <div nz-col nzSpan="12">

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="rmStichwort">{{ 'edit.lemma.rm' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmStichwort" id="rmStichwort" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="rmGenus">{{ 'edit.lemma.rm_gender' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmGenus" id="rmGenus" [nzAutocomplete]="rGenderAutocomplete" (ngModelChange)="rGenderAutocompleteChanged($event)"/>
          <nz-autocomplete [nzDataSource]="rGenderAutocompleteValues" nzBackfill #rGenderAutocomplete></nz-autocomplete>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="rmTags">{{ 'edit.lemma.rm_tags' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmTags" id="rmTags" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="inflectionType">{{ 'edit.lemma.inflection.title' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-select formControlName="inflectionType" id="inflectionType" class="inflection-selection">
            <nz-option nzValue="" [nzLabel]="'edit.lemma.inflection.none' | translate"></nz-option>
            <nz-option nzValue="V" [nzLabel]="'edit.lemma.inflection.verb' | translate"></nz-option>
            <nz-option nzValue="NOUN" [nzLabel]="'edit.lemma.inflection.noun' | translate"></nz-option>
            <nz-option nzValue="ADJECTIVE" [nzLabel]="'edit.lemma.inflection.adjective' | translate"></nz-option>
            <nz-option nzValue="PRONOUN" [nzLabel]="'edit.lemma.inflection.pronoun' | translate"></nz-option>
            <nz-option nzValue="OTHER" [nzLabel]="'edit.lemma.inflection.other' | translate"></nz-option>
          </nz-select>
          <i nz-icon nzType="edit" class="inflection-edit" (click)="editVerb()" *ngIf="validateForm.controls['inflectionType'].value === 'V'"></i>
          <i nz-icon nzType="edit" class="inflection-edit" (click)="editNoun()" *ngIf="validateForm.controls['inflectionType'].value === 'NOUN'"></i>
          <i nz-icon nzType="edit" class="inflection-edit" (click)="editAdjective()" *ngIf="validateForm.controls['inflectionType'].value === 'ADJECTIVE'"></i>
          <i nz-icon nzType="edit" class="inflection-edit" (click)="editPronoun()" *ngIf="validateForm.controls['inflectionType'].value === 'PRONOUN'"></i>
          <i nz-icon nzType="edit" class="inflection-edit" (click)="editOther()" *ngIf="validateForm.controls['inflectionType'].value === 'OTHER'"></i>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="inflectionType">{{ 'lexicon.lemma.columns.pronunciation' | translate }}</nz-form-label>
        <nz-form-control>
          <ng-container *ngIf="!entryVersion?.rmPronunciation">
            nagina
          </ng-container>
          <ng-container *ngIf="entryVersion?.rmPronunciation">
            <app-audio-player [url]="getAudioUrlById(entryVersion.rmPronunciation!)"></app-audio-player>
          </ng-container>
          <i nz-icon nzType="edit" class="inflection-edit" (click)="editPronunciation()"></i>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzSpan="12">

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="rmGrammatik">{{ 'edit.lemma.rm_grammar' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmGrammatik" id="rmGrammatik" [nzAutocomplete]="rGrammarAutocomplete" (ngModelChange)="rGrammarAutocompleteChanged($event)"/>
          <nz-autocomplete [nzDataSource]="rGrammarAutocompleteValues" nzBackfill #rGrammarAutocomplete></nz-autocomplete>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="rmSubsemantik">{{ 'edit.lemma.rm_semantics' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmSubsemantik" id="rmSubsemantik" [nzAutocomplete]="rSemanticsAuto" (input)="rSemanticsChanged()"/>
          <nz-autocomplete [nzDataSource]="rSemanticsAutocomplete" nzBackfill #rSemanticsAuto></nz-autocomplete>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="rmRedirect">{{ 'edit.lemma.rm_link' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmRedirect" id="rmRedirect" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="rmFlex">{{ 'edit.lemma.rm_conjugation' | translate }}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input formControlName="rmFlex" id="rmFlex" />
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <nz-divider></nz-divider>
  <h2>{{ 'edit.lemma.examples' | translate }}</h2>
  <div formArrayName="examples">
    <div *ngFor="let example of exampleControls.controls; let i = index">
      <div nz-row [formGroupName]="i">
        <div nz-col nzSpan="11">
          <nz-form-item>
            <nz-input-group>
              <input type="text" formControlName="exampleRm" nz-input [placeholder]="'edit.lemma.example_placeholder_rm' | translate" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="1">
          <button nz-button nzType="primary" nzSearch  (click)="searchExamples(i)"><span nz-icon nzType="file-search" nzTheme="outline"></span></button>
        </div>
        <div nz-col nzSpan="11">
          <nz-form-item>
            <nz-input-group>
              <input type="text" formControlName="exampleDe" nz-input [placeholder]="'edit.lemma.example_placeholder_de' | translate" />
            </nz-input-group>
          </nz-form-item>
        </div>
        <div nz-col nzSpan="1" class="remove-button">
          <button nz-button nzType="primary" nzSearch  (click)="removeExample(i)"><span nz-icon nzType="delete" nzTheme="outline"></span></button>
        </div>
      </div>


    </div>
    <div class="add-example-button">
      <button nz-button nzType="primary" (click)="addExample()"><span nz-icon nzType="plus-circle" nzTheme="outline"></span></button>
    </div>
  </div>

  <nz-divider></nz-divider>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="userComment">{{ 'edit.lemma.comment' | translate }}</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <textarea nz-input formControlName="userComment" id="userComment" ></textarea>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="userEmail">{{ 'edit.lemma.email' | translate }}</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24">
      <input nz-input formControlName="userEmail" id="userEmail" />
      <button nz-button nzType="default" class="reply-comment" (click)="replyComment()">{{ 'reply.button' | translate }}</button>
    </nz-form-control>
  </nz-form-item>
</form>

<div *nzModalFooter>
  <div class="footer-buttons">
    <div>
      <button nz-button nzType="default" (click)="cancel()">{{ 'edit.cancel' | translate }}</button>
      <button nz-button nzType="default" (click)="reset()">{{ 'edit.reset' | translate }}</button>
    </div>
    <div>
      <button nz-button nzType="default" (click)="save(false)" [nzLoading]="isLoading">{{ (!!entryVersion.entryId ? 'edit.save' : 'edit.create') | translate }}</button>
      <button nz-button nzType="primary" (click)="save(true)" [nzLoading]="isLoading">{{ (!!entryVersion.entryId ? 'edit.save_suggestion' : 'edit.create_suggestion') | translate }}</button>
    </div>
  </div>
</div>

